<!DOCTYPE html>
<html lang="fr">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <title>JS exo 4</title>

</head>

<body>

    <div id="container">

    </div>



    <script>

        // keydown
        // keyup
        // keypress

        

        // document.addEventListener("keydown", function (event) {
        //     if (event.keyCode === 40) { // 40 code : flèche du bas
        //         var container = document.getElementById("container");
        //         var newDiv = document.createElement("div");
        //         newDiv.classList.add("box");
        //         container.appendChild(newDiv);
        //     }
        // });

        // document.addEventListener("keyup", function (event) {
        //     if (event.keyCode === 38) { // 38 code : flèche du haut
        //         var container = document.getElementById("container");
        //         var newDiv = document.removeElement("div");
        //         newDiv.classList.add("box");
        //         container.removeChild(newDiv);
        //     }
        // });

        var removedDivs = []; // tab vide pour stocker les divs a remove

document.addEventListener("keydown", function (event) { 
    if (event.keyCode === 40) { // flèche du bas, si le keycode == 40 alors :
        var colors = ['#ff0000', '#00ff00', '#0000ff'];
        var random_color = colors[Math.floor(Math.random() * colors.length)];
        var container = document.getElementById("container");//prend l'élément avec un ID container 
        var newDiv = document.createElement("div");// et créer un élément div
        newDiv.classList.add("box"); // Ajoute la class box a l'élément newDiv et 
        newDiv.style.backgroundColor = random_color;
        container.appendChild(newDiv);// l'attache a l'élément container
    }
});
document.addEventListener("keyup", function (event) { 
    if (event.keyCode === 38) { // flèche du haut
        var container = document.getElementById("container");
        var lastChild = container.lastElementChild;
        if (lastChild && lastChild.classList.contains("box")) { // Vérifie si le dernierChild contient la class box, 
            //le supprime du container et l'ajoute au tab removedDivs
            container.removeChild(lastChild);
            removedDivs.push(lastChild);
        }
    }
    if (event.keyCode === 40) { //  flèche du bas
        if(removedDivs.length > 0) {
            var lastRemovedDiv = removedDivs.pop();
            container.appendChild(lastRemovedDiv);
        }
    }
});
    </script>

</body>

</html>